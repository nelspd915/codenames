import{r as t,h as e,H as s}from"./p-f73aa137.js";import{C as i,M as n}from"./p-9a70c03b.js";const o=Object.create(null);o["open"]="0";o["close"]="1";o["ping"]="2";o["pong"]="3";o["message"]="4";o["upgrade"]="5";o["noop"]="6";const r=Object.create(null);Object.keys(o).forEach((t=>{r[o[t]]=t}));const h={type:"error",data:"parser error"};const c=typeof Blob==="function"||typeof Blob!=="undefined"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]";const a=typeof ArrayBuffer==="function";const l=t=>typeof ArrayBuffer.isView==="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer;const f=({type:t,data:e},s,i)=>{if(c&&e instanceof Blob){if(s){return i(e)}else{return u(e,i)}}else if(a&&(e instanceof ArrayBuffer||l(e))){if(s){return i(e)}else{return u(new Blob([e]),i)}}return i(o[t]+(e||""))};const u=(t,e)=>{const s=new FileReader;s.onload=function(){const t=s.result.split(",")[1];e("b"+t)};return s.readAsDataURL(t)};const d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";const p=typeof Uint8Array==="undefined"?[]:new Uint8Array(256);for(let t=0;t<d.length;t++){p[d.charCodeAt(t)]=t}const m=t=>{let e=t.length*.75,s=t.length,i,n=0,o,r,h,c;if(t[t.length-1]==="="){e--;if(t[t.length-2]==="="){e--}}const a=new ArrayBuffer(e),l=new Uint8Array(a);for(i=0;i<s;i+=4){o=p[t.charCodeAt(i)];r=p[t.charCodeAt(i+1)];h=p[t.charCodeAt(i+2)];c=p[t.charCodeAt(i+3)];l[n++]=o<<2|r>>4;l[n++]=(r&15)<<4|h>>2;l[n++]=(h&3)<<6|c&63}return a};const b=typeof ArrayBuffer==="function";const y=(t,e)=>{if(typeof t!=="string"){return{type:"message",data:v(t,e)}}const s=t.charAt(0);if(s==="b"){return{type:"message",data:g(t.substring(1),e)}}const i=r[s];if(!i){return h}return t.length>1?{type:r[s],data:t.substring(1)}:{type:r[s]}};const g=(t,e)=>{if(b){const s=m(t);return v(s,e)}else{return{base64:true,data:t}}};const v=(t,e)=>{switch(e){case"blob":return t instanceof ArrayBuffer?new Blob([t]):t;case"arraybuffer":default:return t}};const w=String.fromCharCode(30);const k=(t,e)=>{const s=t.length;const i=new Array(s);let n=0;t.forEach(((t,o)=>{f(t,false,(t=>{i[o]=t;if(++n===s){e(i.join(w))}}))}))};const x=(t,e)=>{const s=t.split(w);const i=[];for(let t=0;t<s.length;t++){const n=y(s[t],e);i.push(n);if(n.type==="error"){break}}return i};const E=4;function j(t){if(t)return C(t)}function C(t){for(var e in j.prototype){t[e]=j.prototype[e]}return t}j.prototype.on=j.prototype.addEventListener=function(t,e){this._callbacks=this._callbacks||{};(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e);return this};j.prototype.once=function(t,e){function s(){this.off(t,s);e.apply(this,arguments)}s.fn=e;this.on(t,s);return this};j.prototype.off=j.prototype.removeListener=j.prototype.removeAllListeners=j.prototype.removeEventListener=function(t,e){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var s=this._callbacks["$"+t];if(!s)return this;if(1==arguments.length){delete this._callbacks["$"+t];return this}var i;for(var n=0;n<s.length;n++){i=s[n];if(i===e||i.fn===e){s.splice(n,1);break}}if(s.length===0){delete this._callbacks["$"+t]}return this};j.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=new Array(arguments.length-1),s=this._callbacks["$"+t];for(var i=1;i<arguments.length;i++){e[i-1]=arguments[i]}if(s){s=s.slice(0);for(var i=0,n=s.length;i<n;++i){s[i].apply(this,e)}}return this};j.prototype.emitReserved=j.prototype.emit;j.prototype.listeners=function(t){this._callbacks=this._callbacks||{};return this._callbacks["$"+t]||[]};j.prototype.hasListeners=function(t){return!!this.listeners(t).length};const A=(()=>{if(typeof self!=="undefined"){return self}else if(typeof window!=="undefined"){return window}else{return Function("return this")()}})();function O(t,...e){return e.reduce(((e,s)=>{if(t.hasOwnProperty(s)){e[s]=t[s]}return e}),{})}const T=setTimeout;const B=clearTimeout;function F(t,e){if(e.useNativeTimers){t.setTimeoutFn=T.bind(A);t.clearTimeoutFn=B.bind(A)}else{t.setTimeoutFn=setTimeout.bind(A);t.clearTimeoutFn=clearTimeout.bind(A)}}const R=1.33;function N(t){if(typeof t==="string"){return _(t)}return Math.ceil((t.byteLength||t.size)*R)}function _(t){let e=0,s=0;for(let i=0,n=t.length;i<n;i++){e=t.charCodeAt(i);if(e<128){s+=1}else if(e<2048){s+=2}else if(e<55296||e>=57344){s+=3}else{i++;s+=4}}return s}class L extends Error{constructor(t,e,s){super(t);this.description=e;this.context=s;this.type="TransportError"}}class P extends j{constructor(t){super();this.writable=false;F(this,t);this.opts=t;this.query=t.query;this.readyState="";this.socket=t.socket}onError(t,e,s){super.emitReserved("error",new L(t,e,s));return this}open(){if("closed"===this.readyState||""===this.readyState){this.readyState="opening";this.doOpen()}return this}close(){if("opening"===this.readyState||"open"===this.readyState){this.doClose();this.onClose()}return this}send(t){if("open"===this.readyState){this.write(t)}}onOpen(){this.readyState="open";this.writable=true;super.emitReserved("open")}onData(t){const e=y(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed";super.emitReserved("close",t)}}const U="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),M=64;let S=0,z;function D(t){let e="";do{e=U[t%M]+e;t=Math.floor(t/M)}while(t>0);return e}function I(){const t=D(+new Date);if(t!==z)return S=0,z=t;return t+"."+D(S++)}function $(t){let e="";for(let s in t){if(t.hasOwnProperty(s)){if(e.length)e+="&";e+=encodeURIComponent(s)+"="+encodeURIComponent(t[s])}}return e}function q(t){let e={};let s=t.split("&");for(let t=0,i=s.length;t<i;t++){let i=s[t].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}let G=false;try{G=typeof XMLHttpRequest!=="undefined"&&"withCredentials"in new XMLHttpRequest}catch(t){}const H=G;function X(t){const e=t.xdomain;try{if("undefined"!==typeof XMLHttpRequest&&(!e||H)){return new XMLHttpRequest}}catch(t){}if(!e){try{return new(A[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}}}function J(){}const V=function(){const t=new X({xdomain:false});return null!=t.responseType}();class W extends P{constructor(t){super(t);this.polling=false;if(typeof location!=="undefined"){const e="https:"===location.protocol;let s=location.port;if(!s){s=e?"443":"80"}this.xd=typeof location!=="undefined"&&t.hostname!==location.hostname||s!==t.port;this.xs=t.secure!==e}const e=t&&t.forceBase64;this.supportsBinary=V&&!e}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const e=()=>{this.readyState="paused";t()};if(this.polling||!this.writable){let t=0;if(this.polling){t++;this.once("pollComplete",(function(){--t||e()}))}if(!this.writable){t++;this.once("drain",(function(){--t||e()}))}}else{e()}}poll(){this.polling=true;this.doPoll();this.emitReserved("poll")}onData(t){const e=t=>{if("opening"===this.readyState&&t.type==="open"){this.onOpen()}if("close"===t.type){this.onClose({description:"transport closed by the server"});return false}this.onPacket(t)};x(t,this.socket.binaryType).forEach(e);if("closed"!==this.readyState){this.polling=false;this.emitReserved("pollComplete");if("open"===this.readyState){this.poll()}}}doClose(){const t=()=>{this.write([{type:"close"}])};if("open"===this.readyState){t()}else{this.once("open",t)}}write(t){this.writable=false;k(t,(t=>{this.doWrite(t,(()=>{this.writable=true;this.emitReserved("drain")}))}))}uri(){let t=this.query||{};const e=this.opts.secure?"https":"http";let s="";if(false!==this.opts.timestampRequests){t[this.opts.timestampParam]=I()}if(!this.supportsBinary&&!t.sid){t.b64=1}if(this.opts.port&&("https"===e&&Number(this.opts.port)!==443||"http"===e&&Number(this.opts.port)!==80)){s=":"+this.opts.port}const i=$(t);const n=this.opts.hostname.indexOf(":")!==-1;return e+"://"+(n?"["+this.opts.hostname+"]":this.opts.hostname)+s+this.opts.path+(i.length?"?"+i:"")}request(t={}){Object.assign(t,{xd:this.xd,xs:this.xs},this.opts);return new K(this.uri(),t)}doWrite(t,e){const s=this.request({method:"POST",data:t});s.on("success",e);s.on("error",((t,e)=>{this.onError("xhr post error",t,e)}))}doPoll(){const t=this.request();t.on("data",this.onData.bind(this));t.on("error",((t,e)=>{this.onError("xhr poll error",t,e)}));this.pollXhr=t}}class K extends j{constructor(t,e){super();F(this,e);this.opts=e;this.method=e.method||"GET";this.uri=t;this.async=false!==e.async;this.data=undefined!==e.data?e.data:null;this.create()}create(){const t=O(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd;t.xscheme=!!this.opts.xs;const e=this.xhr=new X(t);try{e.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){e.setDisableHeaderCheck&&e.setDisableHeaderCheck(true);for(let t in this.opts.extraHeaders){if(this.opts.extraHeaders.hasOwnProperty(t)){e.setRequestHeader(t,this.opts.extraHeaders[t])}}}}catch(t){}if("POST"===this.method){try{e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}}try{e.setRequestHeader("Accept","*/*")}catch(t){}if("withCredentials"in e){e.withCredentials=this.opts.withCredentials}if(this.opts.requestTimeout){e.timeout=this.opts.requestTimeout}e.onreadystatechange=()=>{if(4!==e.readyState)return;if(200===e.status||1223===e.status){this.onLoad()}else{this.setTimeoutFn((()=>{this.onError(typeof e.status==="number"?e.status:0)}),0)}};e.send(this.data)}catch(t){this.setTimeoutFn((()=>{this.onError(t)}),0);return}if(typeof document!=="undefined"){this.index=K.requestsCount++;K.requests[this.index]=this}}onError(t){this.emitReserved("error",t,this.xhr);this.cleanup(true)}cleanup(t){if("undefined"===typeof this.xhr||null===this.xhr){return}this.xhr.onreadystatechange=J;if(t){try{this.xhr.abort()}catch(t){}}if(typeof document!=="undefined"){delete K.requests[this.index]}this.xhr=null}onLoad(){const t=this.xhr.responseText;if(t!==null){this.emitReserved("data",t);this.emitReserved("success");this.cleanup()}}abort(){this.cleanup()}}K.requestsCount=0;K.requests={};if(typeof document!=="undefined"){if(typeof attachEvent==="function"){attachEvent("onunload",Y)}else if(typeof addEventListener==="function"){const t="onpagehide"in A?"pagehide":"unload";addEventListener(t,Y,false)}}function Y(){for(let t in K.requests){if(K.requests.hasOwnProperty(t)){K.requests[t].abort()}}}const Q=(()=>{const t=typeof Promise==="function"&&typeof Promise.resolve==="function";if(t){return t=>Promise.resolve().then(t)}else{return(t,e)=>e(t,0)}})();const Z=A.WebSocket||A.MozWebSocket;const tt="arraybuffer";const et=typeof navigator!=="undefined"&&typeof navigator.product==="string"&&navigator.product.toLowerCase()==="reactnative";class st extends P{constructor(t){super(t);this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check()){return}const t=this.uri();const e=this.opts.protocols;const s=et?{}:O(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");if(this.opts.extraHeaders){s.headers=this.opts.extraHeaders}try{this.ws=!et?e?new Z(t,e):new Z(t):new Z(t,e,s)}catch(t){return this.emitReserved("error",t)}this.ws.binaryType=this.socket.binaryType||tt;this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{if(this.opts.autoUnref){this.ws._socket.unref()}this.onOpen()};this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t});this.ws.onmessage=t=>this.onData(t.data);this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=false;for(let e=0;e<t.length;e++){const s=t[e];const i=e===t.length-1;f(s,this.supportsBinary,(t=>{try{{this.ws.send(t)}}catch(t){}if(i){Q((()=>{this.writable=true;this.emitReserved("drain")}),this.setTimeoutFn)}}))}}doClose(){if(typeof this.ws!=="undefined"){this.ws.close();this.ws=null}}uri(){let t=this.query||{};const e=this.opts.secure?"wss":"ws";let s="";if(this.opts.port&&("wss"===e&&Number(this.opts.port)!==443||"ws"===e&&Number(this.opts.port)!==80)){s=":"+this.opts.port}if(this.opts.timestampRequests){t[this.opts.timestampParam]=I()}if(!this.supportsBinary){t.b64=1}const i=$(t);const n=this.opts.hostname.indexOf(":")!==-1;return e+"://"+(n?"["+this.opts.hostname+"]":this.opts.hostname)+s+this.opts.path+(i.length?"?"+i:"")}check(){return!!Z}}const it={websocket:st,polling:W};const nt=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;const ot=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function rt(t){const e=t,s=t.indexOf("["),i=t.indexOf("]");if(s!=-1&&i!=-1){t=t.substring(0,s)+t.substring(s,i).replace(/:/g,";")+t.substring(i,t.length)}let n=nt.exec(t||""),o={},r=14;while(r--){o[ot[r]]=n[r]||""}if(s!=-1&&i!=-1){o.source=e;o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":");o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":");o.ipv6uri=true}o.pathNames=ht(o,o["path"]);o.queryKey=ct(o,o["query"]);return o}function ht(t,e){const s=/\/{2,9}/g,i=e.replace(s,"/").split("/");if(e.substr(0,1)=="/"||e.length===0){i.splice(0,1)}if(e.substr(e.length-1,1)=="/"){i.splice(i.length-1,1)}return i}function ct(t,e){const s={};e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(t,e,i){if(e){s[e]=i}}));return s}class at extends j{constructor(t,e={}){super();if(t&&"object"===typeof t){e=t;t=null}if(t){t=rt(t);e.hostname=t.host;e.secure=t.protocol==="https"||t.protocol==="wss";e.port=t.port;if(t.query)e.query=t.query}else if(e.host){e.hostname=rt(e.host).host}F(this,e);this.secure=null!=e.secure?e.secure:typeof location!=="undefined"&&"https:"===location.protocol;if(e.hostname&&!e.port){e.port=this.secure?"443":"80"}this.hostname=e.hostname||(typeof location!=="undefined"?location.hostname:"localhost");this.port=e.port||(typeof location!=="undefined"&&location.port?location.port:this.secure?"443":"80");this.transports=e.transports||["polling","websocket"];this.readyState="";this.writeBuffer=[];this.prevBufferLen=0;this.opts=Object.assign({path:"/engine.io",agent:false,withCredentials:false,upgrade:true,timestampParam:"t",rememberUpgrade:false,rejectUnauthorized:true,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:true},e);this.opts.path=this.opts.path.replace(/\/$/,"")+"/";if(typeof this.opts.query==="string"){this.opts.query=q(this.opts.query)}this.id=null;this.upgrades=null;this.pingInterval=null;this.pingTimeout=null;this.pingTimeoutTimer=null;if(typeof addEventListener==="function"){if(this.opts.closeOnBeforeunload){addEventListener("beforeunload",(()=>{if(this.transport){this.transport.removeAllListeners();this.transport.close()}}),false)}if(this.hostname!=="localhost"){this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})};addEventListener("offline",this.offlineEventListener,false)}}this.open()}createTransport(t){const e=Object.assign({},this.opts.query);e.EIO=E;e.transport=t;if(this.id)e.sid=this.id;const s=Object.assign({},this.opts.transportOptions[t],this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new it[t](s)}open(){let t;if(this.opts.rememberUpgrade&&at.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1){t="websocket"}else if(0===this.transports.length){this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);return}else{t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){this.transports.shift();this.open();return}t.open();this.setTransport(t)}setTransport(t){if(this.transport){this.transport.removeAllListeners()}this.transport=t;t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(t=>this.onClose("transport close",t)))}probe(t){let e=this.createTransport(t);let s=false;at.priorWebsocketSuccess=false;const i=()=>{if(s)return;e.send([{type:"ping",data:"probe"}]);e.once("packet",(t=>{if(s)return;if("pong"===t.type&&"probe"===t.data){this.upgrading=true;this.emitReserved("upgrading",e);if(!e)return;at.priorWebsocketSuccess="websocket"===e.name;this.transport.pause((()=>{if(s)return;if("closed"===this.readyState)return;a();this.setTransport(e);e.send([{type:"upgrade"}]);this.emitReserved("upgrade",e);e=null;this.upgrading=false;this.flush()}))}else{const t=new Error("probe error");t.transport=e.name;this.emitReserved("upgradeError",t)}}))};function n(){if(s)return;s=true;a();e.close();e=null}const o=t=>{const s=new Error("probe error: "+t);s.transport=e.name;n();this.emitReserved("upgradeError",s)};function r(){o("transport closed")}function h(){o("socket closed")}function c(t){if(e&&t.name!==e.name){n()}}const a=()=>{e.removeListener("open",i);e.removeListener("error",o);e.removeListener("close",r);this.off("close",h);this.off("upgrading",c)};e.once("open",i);e.once("error",o);e.once("close",r);this.once("close",h);this.once("upgrading",c);e.open()}onOpen(){this.readyState="open";at.priorWebsocketSuccess="websocket"===this.transport.name;this.emitReserved("open");this.flush();if("open"===this.readyState&&this.opts.upgrade&&this.transport.pause){let t=0;const e=this.upgrades.length;for(;t<e;t++){this.probe(this.upgrades[t])}}}onPacket(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){this.emitReserved("packet",t);this.emitReserved("heartbeat");switch(t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.resetPingTimeout();this.sendPacket("pong");this.emitReserved("ping");this.emitReserved("pong");break;case"error":const e=new Error("server error");e.code=t.data;this.onError(e);break;case"message":this.emitReserved("data",t.data);this.emitReserved("message",t.data);break}}}onHandshake(t){this.emitReserved("handshake",t);this.id=t.sid;this.transport.query.sid=t.sid;this.upgrades=this.filterUpgrades(t.upgrades);this.pingInterval=t.pingInterval;this.pingTimeout=t.pingTimeout;this.maxPayload=t.maxPayload;this.onOpen();if("closed"===this.readyState)return;this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer);this.pingTimeoutTimer=this.setTimeoutFn((()=>{this.onClose("ping timeout")}),this.pingInterval+this.pingTimeout);if(this.opts.autoUnref){this.pingTimeoutTimer.unref()}}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen);this.prevBufferLen=0;if(0===this.writeBuffer.length){this.emitReserved("drain")}else{this.flush()}}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this.getWritablePackets();this.transport.send(t);this.prevBufferLen=t.length;this.emitReserved("flush")}}getWritablePackets(){const t=this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1;if(!t){return this.writeBuffer}let e=1;for(let t=0;t<this.writeBuffer.length;t++){const s=this.writeBuffer[t].data;if(s){e+=N(s)}if(t>0&&e>this.maxPayload){return this.writeBuffer.slice(0,t)}e+=2}return this.writeBuffer}write(t,e,s){this.sendPacket("message",t,e,s);return this}send(t,e,s){this.sendPacket("message",t,e,s);return this}sendPacket(t,e,s,i){if("function"===typeof e){i=e;e=undefined}if("function"===typeof s){i=s;s=null}if("closing"===this.readyState||"closed"===this.readyState){return}s=s||{};s.compress=false!==s.compress;const n={type:t,data:e,options:s};this.emitReserved("packetCreate",n);this.writeBuffer.push(n);if(i)this.once("flush",i);this.flush()}close(){const t=()=>{this.onClose("forced close");this.transport.close()};const e=()=>{this.off("upgrade",e);this.off("upgradeError",e);t()};const s=()=>{this.once("upgrade",e);this.once("upgradeError",e)};if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";if(this.writeBuffer.length){this.once("drain",(()=>{if(this.upgrading){s()}else{t()}}))}else if(this.upgrading){s()}else{t()}}return this}onError(t){at.priorWebsocketSuccess=false;this.emitReserved("error",t);this.onClose("transport error",t)}onClose(t,e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){this.clearTimeoutFn(this.pingTimeoutTimer);this.transport.removeAllListeners("close");this.transport.close();this.transport.removeAllListeners();if(typeof removeEventListener==="function"){removeEventListener("offline",this.offlineEventListener,false)}this.readyState="closed";this.id=null;this.emitReserved("close",t,e);this.writeBuffer=[];this.prevBufferLen=0}}filterUpgrades(t){const e=[];let s=0;const i=t.length;for(;s<i;s++){if(~this.transports.indexOf(t[s]))e.push(t[s])}return e}}at.protocol=E;function lt(t,e="",s){let i=t;s=s||typeof location!=="undefined"&&location;if(null==t)t=s.protocol+"//"+s.host;if(typeof t==="string"){if("/"===t.charAt(0)){if("/"===t.charAt(1)){t=s.protocol+t}else{t=s.host+t}}if(!/^(https?|wss?):\/\//.test(t)){if("undefined"!==typeof s){t=s.protocol+"//"+t}else{t="https://"+t}}i=rt(t)}if(!i.port){if(/^(http|ws)$/.test(i.protocol)){i.port="80"}else if(/^(http|ws)s$/.test(i.protocol)){i.port="443"}}i.path=i.path||"/";const n=i.host.indexOf(":")!==-1;const o=n?"["+i.host+"]":i.host;i.id=i.protocol+"://"+o+":"+i.port+e;i.href=i.protocol+"://"+o+(s&&s.port===i.port?"":":"+i.port);return i}const ft=typeof ArrayBuffer==="function";const ut=t=>typeof ArrayBuffer.isView==="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer;const dt=Object.prototype.toString;const pt=typeof Blob==="function"||typeof Blob!=="undefined"&&dt.call(Blob)==="[object BlobConstructor]";const mt=typeof File==="function"||typeof File!=="undefined"&&dt.call(File)==="[object FileConstructor]";function bt(t){return ft&&(t instanceof ArrayBuffer||ut(t))||pt&&t instanceof Blob||mt&&t instanceof File}function yt(t,e){if(!t||typeof t!=="object"){return false}if(Array.isArray(t)){for(let e=0,s=t.length;e<s;e++){if(yt(t[e])){return true}}return false}if(bt(t)){return true}if(t.toJSON&&typeof t.toJSON==="function"&&arguments.length===1){return yt(t.toJSON(),true)}for(const e in t){if(Object.prototype.hasOwnProperty.call(t,e)&&yt(t[e])){return true}}return false}function gt(t){const e=[];const s=t.data;const i=t;i.data=vt(s,e);i.attachments=e.length;return{packet:i,buffers:e}}function vt(t,e){if(!t)return t;if(bt(t)){const s={_placeholder:true,num:e.length};e.push(t);return s}else if(Array.isArray(t)){const s=new Array(t.length);for(let i=0;i<t.length;i++){s[i]=vt(t[i],e)}return s}else if(typeof t==="object"&&!(t instanceof Date)){const s={};for(const i in t){if(Object.prototype.hasOwnProperty.call(t,i)){s[i]=vt(t[i],e)}}return s}return t}function wt(t,e){t.data=kt(t.data,e);t.attachments=undefined;return t}function kt(t,e){if(!t)return t;if(t&&t._placeholder===true){const s=typeof t.num==="number"&&t.num>=0&&t.num<e.length;if(s){return e[t.num]}else{throw new Error("illegal attachments")}}else if(Array.isArray(t)){for(let s=0;s<t.length;s++){t[s]=kt(t[s],e)}}else if(typeof t==="object"){for(const s in t){if(Object.prototype.hasOwnProperty.call(t,s)){t[s]=kt(t[s],e)}}}return t}const xt=5;var Et;(function(t){t[t["CONNECT"]=0]="CONNECT";t[t["DISCONNECT"]=1]="DISCONNECT";t[t["EVENT"]=2]="EVENT";t[t["ACK"]=3]="ACK";t[t["CONNECT_ERROR"]=4]="CONNECT_ERROR";t[t["BINARY_EVENT"]=5]="BINARY_EVENT";t[t["BINARY_ACK"]=6]="BINARY_ACK"})(Et||(Et={}));class jt{constructor(t){this.replacer=t}encode(t){if(t.type===Et.EVENT||t.type===Et.ACK){if(yt(t)){t.type=t.type===Et.EVENT?Et.BINARY_EVENT:Et.BINARY_ACK;return this.encodeAsBinary(t)}}return[this.encodeAsString(t)]}encodeAsString(t){let e=""+t.type;if(t.type===Et.BINARY_EVENT||t.type===Et.BINARY_ACK){e+=t.attachments+"-"}if(t.nsp&&"/"!==t.nsp){e+=t.nsp+","}if(null!=t.id){e+=t.id}if(null!=t.data){e+=JSON.stringify(t.data,this.replacer)}return e}encodeAsBinary(t){const e=gt(t);const s=this.encodeAsString(e.packet);const i=e.buffers;i.unshift(s);return i}}class Ct extends j{constructor(t){super();this.reviver=t}add(t){let e;if(typeof t==="string"){if(this.reconstructor){throw new Error("got plaintext data when reconstructing a packet")}e=this.decodeString(t);if(e.type===Et.BINARY_EVENT||e.type===Et.BINARY_ACK){this.reconstructor=new At(e);if(e.attachments===0){super.emitReserved("decoded",e)}}else{super.emitReserved("decoded",e)}}else if(bt(t)||t.base64){if(!this.reconstructor){throw new Error("got binary data when not reconstructing a packet")}else{e=this.reconstructor.takeBinaryData(t);if(e){this.reconstructor=null;super.emitReserved("decoded",e)}}}else{throw new Error("Unknown type: "+t)}}decodeString(t){let e=0;const s={type:Number(t.charAt(0))};if(Et[s.type]===undefined){throw new Error("unknown packet type "+s.type)}if(s.type===Et.BINARY_EVENT||s.type===Et.BINARY_ACK){const i=e+1;while(t.charAt(++e)!=="-"&&e!=t.length){}const n=t.substring(i,e);if(n!=Number(n)||t.charAt(e)!=="-"){throw new Error("Illegal attachments")}s.attachments=Number(n)}if("/"===t.charAt(e+1)){const i=e+1;while(++e){const s=t.charAt(e);if(","===s)break;if(e===t.length)break}s.nsp=t.substring(i,e)}else{s.nsp="/"}const i=t.charAt(e+1);if(""!==i&&Number(i)==i){const i=e+1;while(++e){const s=t.charAt(e);if(null==s||Number(s)!=s){--e;break}if(e===t.length)break}s.id=Number(t.substring(i,e+1))}if(t.charAt(++e)){const i=this.tryParse(t.substr(e));if(Ct.isPayloadValid(s.type,i)){s.data=i}else{throw new Error("invalid payload")}}return s}tryParse(t){try{return JSON.parse(t,this.reviver)}catch(t){return false}}static isPayloadValid(t,e){switch(t){case Et.CONNECT:return typeof e==="object";case Et.DISCONNECT:return e===undefined;case Et.CONNECT_ERROR:return typeof e==="string"||typeof e==="object";case Et.EVENT:case Et.BINARY_EVENT:return Array.isArray(e)&&e.length>0;case Et.ACK:case Et.BINARY_ACK:return Array.isArray(e)}}destroy(){if(this.reconstructor){this.reconstructor.finishedReconstruction()}}}class At{constructor(t){this.packet=t;this.buffers=[];this.reconPack=t}takeBinaryData(t){this.buffers.push(t);if(this.buffers.length===this.reconPack.attachments){const t=wt(this.reconPack,this.buffers);this.finishedReconstruction();return t}return null}finishedReconstruction(){this.reconPack=null;this.buffers=[]}}const Ot=Object.freeze({__proto__:null,protocol:xt,get PacketType(){return Et},Encoder:jt,Decoder:Ct});function Tt(t,e,s){t.on(e,s);return function i(){t.off(e,s)}}const Bt=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Ft extends j{constructor(t,e,s){super();this.connected=false;this.receiveBuffer=[];this.sendBuffer=[];this.ids=0;this.acks={};this.flags={};this.io=t;this.nsp=e;if(s&&s.auth){this.auth=s.auth}if(this.io._autoConnect)this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Tt(t,"open",this.onopen.bind(this)),Tt(t,"packet",this.onpacket.bind(this)),Tt(t,"error",this.onerror.bind(this)),Tt(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){if(this.connected)return this;this.subEvents();if(!this.io["_reconnecting"])this.io.open();if("open"===this.io._readyState)this.onopen();return this}open(){return this.connect()}send(...t){t.unshift("message");this.emit.apply(this,t);return this}emit(t,...e){if(Bt.hasOwnProperty(t)){throw new Error('"'+t+'" is a reserved event name')}e.unshift(t);const s={type:Et.EVENT,data:e};s.options={};s.options.compress=this.flags.compress!==false;if("function"===typeof e[e.length-1]){const t=this.ids++;const i=e.pop();this._registerAckCallback(t,i);s.id=t}const i=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;const n=this.flags.volatile&&(!i||!this.connected);if(n);else if(this.connected){this.notifyOutgoingListeners(s);this.packet(s)}else{this.sendBuffer.push(s)}this.flags={};return this}_registerAckCallback(t,e){const s=this.flags.timeout;if(s===undefined){this.acks[t]=e;return}const i=this.io.setTimeoutFn((()=>{delete this.acks[t];for(let e=0;e<this.sendBuffer.length;e++){if(this.sendBuffer[e].id===t){this.sendBuffer.splice(e,1)}}e.call(this,new Error("operation has timed out"))}),s);this.acks[t]=(...t)=>{this.io.clearTimeoutFn(i);e.apply(this,[null,...t])}}packet(t){t.nsp=this.nsp;this.io._packet(t)}onopen(){if(typeof this.auth=="function"){this.auth((t=>{this.packet({type:Et.CONNECT,data:t})}))}else{this.packet({type:Et.CONNECT,data:this.auth})}}onerror(t){if(!this.connected){this.emitReserved("connect_error",t)}}onclose(t,e){this.connected=false;delete this.id;this.emitReserved("disconnect",t,e)}onpacket(t){const e=t.nsp===this.nsp;if(!e)return;switch(t.type){case Et.CONNECT:if(t.data&&t.data.sid){const e=t.data.sid;this.onconnect(e)}else{this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"))}break;case Et.EVENT:case Et.BINARY_EVENT:this.onevent(t);break;case Et.ACK:case Et.BINARY_ACK:this.onack(t);break;case Et.DISCONNECT:this.ondisconnect();break;case Et.CONNECT_ERROR:this.destroy();const e=new Error(t.data.message);e.data=t.data.data;this.emitReserved("connect_error",e);break}}onevent(t){const e=t.data||[];if(null!=t.id){e.push(this.ack(t.id))}if(this.connected){this.emitEvent(e)}else{this.receiveBuffer.push(Object.freeze(e))}}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const s of e){s.apply(this,t)}}super.emit.apply(this,t)}ack(t){const e=this;let s=false;return function(...i){if(s)return;s=true;e.packet({type:Et.ACK,id:t,data:i})}}onack(t){const e=this.acks[t.id];if("function"===typeof e){e.apply(this,t.data);delete this.acks[t.id]}}onconnect(t){this.id=t;this.connected=true;this.emitBuffered();this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach((t=>this.emitEvent(t)));this.receiveBuffer=[];this.sendBuffer.forEach((t=>{this.notifyOutgoingListeners(t);this.packet(t)}));this.sendBuffer=[]}ondisconnect(){this.destroy();this.onclose("io server disconnect")}destroy(){if(this.subs){this.subs.forEach((t=>t()));this.subs=undefined}this.io["_destroy"](this)}disconnect(){if(this.connected){this.packet({type:Et.DISCONNECT})}this.destroy();if(this.connected){this.onclose("io client disconnect")}return this}close(){return this.disconnect()}compress(t){this.flags.compress=t;return this}get volatile(){this.flags.volatile=true;return this}timeout(t){this.flags.timeout=t;return this}onAny(t){this._anyListeners=this._anyListeners||[];this._anyListeners.push(t);return this}prependAny(t){this._anyListeners=this._anyListeners||[];this._anyListeners.unshift(t);return this}offAny(t){if(!this._anyListeners){return this}if(t){const e=this._anyListeners;for(let s=0;s<e.length;s++){if(t===e[s]){e.splice(s,1);return this}}}else{this._anyListeners=[]}return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){this._anyOutgoingListeners=this._anyOutgoingListeners||[];this._anyOutgoingListeners.push(t);return this}prependAnyOutgoing(t){this._anyOutgoingListeners=this._anyOutgoingListeners||[];this._anyOutgoingListeners.unshift(t);return this}offAnyOutgoing(t){if(!this._anyOutgoingListeners){return this}if(t){const e=this._anyOutgoingListeners;for(let s=0;s<e.length;s++){if(t===e[s]){e.splice(s,1);return this}}}else{this._anyOutgoingListeners=[]}return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const e=this._anyOutgoingListeners.slice();for(const s of e){s.apply(this,t.data)}}}}function Rt(t){t=t||{};this.ms=t.min||100;this.max=t.max||1e4;this.factor=t.factor||2;this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0;this.attempts=0}Rt.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random();var s=Math.floor(e*this.jitter*t);t=(Math.floor(e*10)&1)==0?t-s:t+s}return Math.min(t,this.max)|0};Rt.prototype.reset=function(){this.attempts=0};Rt.prototype.setMin=function(t){this.ms=t};Rt.prototype.setMax=function(t){this.max=t};Rt.prototype.setJitter=function(t){this.jitter=t};class Nt extends j{constructor(t,e){var s;super();this.nsps={};this.subs=[];if(t&&"object"===typeof t){e=t;t=undefined}e=e||{};e.path=e.path||"/socket.io";this.opts=e;F(this,e);this.reconnection(e.reconnection!==false);this.reconnectionAttempts(e.reconnectionAttempts||Infinity);this.reconnectionDelay(e.reconnectionDelay||1e3);this.reconnectionDelayMax(e.reconnectionDelayMax||5e3);this.randomizationFactor((s=e.randomizationFactor)!==null&&s!==void 0?s:.5);this.backoff=new Rt({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()});this.timeout(null==e.timeout?2e4:e.timeout);this._readyState="closed";this.uri=t;const i=e.parser||Ot;this.encoder=new i.Encoder;this.decoder=new i.Decoder;this._autoConnect=e.autoConnect!==false;if(this._autoConnect)this.open()}reconnection(t){if(!arguments.length)return this._reconnection;this._reconnection=!!t;return this}reconnectionAttempts(t){if(t===undefined)return this._reconnectionAttempts;this._reconnectionAttempts=t;return this}reconnectionDelay(t){var e;if(t===undefined)return this._reconnectionDelay;this._reconnectionDelay=t;(e=this.backoff)===null||e===void 0?void 0:e.setMin(t);return this}randomizationFactor(t){var e;if(t===undefined)return this._randomizationFactor;this._randomizationFactor=t;(e=this.backoff)===null||e===void 0?void 0:e.setJitter(t);return this}reconnectionDelayMax(t){var e;if(t===undefined)return this._reconnectionDelayMax;this._reconnectionDelayMax=t;(e=this.backoff)===null||e===void 0?void 0:e.setMax(t);return this}timeout(t){if(!arguments.length)return this._timeout;this._timeout=t;return this}maybeReconnectOnOpen(){if(!this._reconnecting&&this._reconnection&&this.backoff.attempts===0){this.reconnect()}}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new at(this.uri,this.opts);const e=this.engine;const s=this;this._readyState="opening";this.skipReconnect=false;const i=Tt(e,"open",(function(){s.onopen();t&&t()}));const n=Tt(e,"error",(e=>{s.cleanup();s._readyState="closed";this.emitReserved("error",e);if(t){t(e)}else{s.maybeReconnectOnOpen()}}));if(false!==this._timeout){const t=this._timeout;if(t===0){i()}const s=this.setTimeoutFn((()=>{i();e.close();e.emit("error",new Error("timeout"))}),t);if(this.opts.autoUnref){s.unref()}this.subs.push((function t(){clearTimeout(s)}))}this.subs.push(i);this.subs.push(n);return this}connect(t){return this.open(t)}onopen(){this.cleanup();this._readyState="open";this.emitReserved("open");const t=this.engine;this.subs.push(Tt(t,"ping",this.onping.bind(this)),Tt(t,"data",this.ondata.bind(this)),Tt(t,"error",this.onerror.bind(this)),Tt(t,"close",this.onclose.bind(this)),Tt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){this.decoder.add(t)}ondecoded(t){this.emitReserved("packet",t)}onerror(t){this.emitReserved("error",t)}socket(t,e){let s=this.nsps[t];if(!s){s=new Ft(this,t,e);this.nsps[t]=s}return s}_destroy(t){const e=Object.keys(this.nsps);for(const t of e){const e=this.nsps[t];if(e.active){return}}this._close()}_packet(t){const e=this.encoder.encode(t);for(let s=0;s<e.length;s++){this.engine.write(e[s],t.options)}}cleanup(){this.subs.forEach((t=>t()));this.subs.length=0;this.decoder.destroy()}_close(){this.skipReconnect=true;this._reconnecting=false;this.onclose("forced close");if(this.engine)this.engine.close()}disconnect(){return this._close()}onclose(t,e){this.cleanup();this.backoff.reset();this._readyState="closed";this.emitReserved("close",t,e);if(this._reconnection&&!this.skipReconnect){this.reconnect()}}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts){this.backoff.reset();this.emitReserved("reconnect_failed");this._reconnecting=false}else{const e=this.backoff.duration();this._reconnecting=true;const s=this.setTimeoutFn((()=>{if(t.skipReconnect)return;this.emitReserved("reconnect_attempt",t.backoff.attempts);if(t.skipReconnect)return;t.open((e=>{if(e){t._reconnecting=false;t.reconnect();this.emitReserved("reconnect_error",e)}else{t.onreconnect()}}))}),e);if(this.opts.autoUnref){s.unref()}this.subs.push((function t(){clearTimeout(s)}))}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=false;this.backoff.reset();this.emitReserved("reconnect",t)}}const _t={};function Lt(t,e){if(typeof t==="object"){e=t;t=undefined}e=e||{};const s=lt(t,e.path||"/socket.io");const i=s.source;const n=s.id;const o=s.path;const r=_t[n]&&o in _t[n]["nsps"];const h=e.forceNew||e["force new connection"]||false===e.multiplex||r;let c;if(h){c=new Nt(i,e)}else{if(!_t[n]){_t[n]=new Nt(i,e)}c=_t[n]}if(s.query&&!e.query){e.query=s.queryKey}return c.socket(s.path,e)}Object.assign(Lt,{Manager:Nt,Socket:Ft,io:Lt,connect:Lt});const Pt="https://bestdotaeu-codenames-backend.herokuapp.com";const Ut="http://localhost:8080";const Mt=":host{display:block;width:fit-content;margin:auto}codenames-board{width:800px}.app-container{display:flex;justify-content:space-around}.game-container{display:flex}";const St=class{constructor(e){t(this,e);this.showLandingPage=true;this.server={};this.revealCell=t=>{this.socket.emit("revealCell",this.roomCode,t,this.username)};this.enterRoom=(t,e)=>{this.roomCode=t;this.username=e;window.localStorage.setItem("codenamesRoomCode",this.roomCode);window.localStorage.setItem("codenamesUsername",this.username);this.socket.emit("enterRoom",this.roomCode,this.username);this.showLandingPage=false};this.becomeSpymaster=()=>{this.socket.emit("becomeSpymaster",this.roomCode,this.username)};this.becomeGuesser=()=>{this.socket.emit("becomeGuesser",this.roomCode,this.username)};this.newGame=()=>{this.socket.emit("newGame",this.roomCode,this.username)};this.joinTeam=t=>{this.socket.emit("joinTeam",this.roomCode,this.username,t)};this.endTurn=()=>{this.socket.emit("endTurn",this.roomCode)};this.randomizeTeams=()=>{this.socket.emit("randomizeTeams",this.roomCode)}}connectedCallback(){var t,e;const s=new URLSearchParams(window.location.search);const i=s.get("dev");const n=i==="true"?Ut:Pt;const o=window.localStorage.getItem("codenamesRoomCode");this.roomCode=(e=(t=s.get("roomCode"))!==null&&t!==void 0?t:o)!==null&&e!==void 0?e:"";const r=window.localStorage.getItem("codenamesUsername");this.username=r!==null&&r!==void 0?r:"";this.socket=Lt(n);this.socket.on("updateGame",(t=>{this.gameData=t}));this.server={socket:this.socket,revealCell:this.revealCell,enterRoom:this.enterRoom,becomeSpymaster:this.becomeSpymaster,becomeGuesser:this.becomeGuesser,newGame:this.newGame,joinTeam:this.joinTeam,endTurn:this.endTurn,randomizeTeams:this.randomizeTeams}}render(){var t,i;return e(s,null,e("div",{class:"app-container"},this.showLandingPage?e("codenames-landing-page",{server:this.server,roomCode:this.roomCode,username:this.username}):e("codenames-game",{server:this.server,gameData:this.gameData,userPlayer:(i=(t=this.gameData)===null||t===void 0?void 0:t.players)===null||i===void 0?void 0:i.find((t=>t.username===this.username))})))}};St.style=Mt;const zt=":host{display:flex;margin:25px 50px 0px 50px;flex-wrap:wrap;justify-content:space-between;width:850px;height:600px}";const Dt=class{constructor(e){t(this,e);this.canGuess=false;this.loadingCellIndex=-1}render(){var t,i;return e(s,null,(i=(t=this.boardData)===null||t===void 0?void 0:t.map(((t,s)=>e("codenames-cell",{server:this.server,index:s,word:t.word,color:t.color,mode:t.mode,revealed:t.revealed,canGuess:this.canGuess,loading:this.loadingCellIndex===s}))))!==null&&i!==void 0?i:null)}};Dt.style=zt;const It=":host{display:block}.button-container{display:flex;align-items:center;justify-content:center;width:180px;height:fit-content;cursor:pointer;border:#4a4a4a solid 2px;border-radius:4px;color:#4a4a4a;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.button-container:hover{color:#FFF;background-color:#7d7d7d;border-color:#4a4a4a}.button-container:active{color:#FFF;background-color:#4a4a4a;border-color:#000}.button-container.on{color:#FFF;background-color:#4a4a4a;border-color:#000}.button-container.blue{color:#4183cc;border-color:#4183cc}.button-container.blue:hover{color:#FFF;background-color:#72aff5;border-color:#4183cc}.button-container.blue:active,.button-container.blue.on{color:#FFF;background-color:#4183cc;border-color:#124f95}.button-container.red{color:#d13030;border-color:#d13030}.button-container.red:hover{color:#FFF;background-color:#f77d7d;border-color:#d13030}.button-container.red:active,.button-container.red.on{color:#FFF;background-color:#d13030;border-color:#9f1010}.content{display:flex;align-items:center;justify-content:center;font-family:Roboto, verdana, sans-serif;font-size:14pt;text-align:center;margin:10px 5px}";const $t=class{constructor(e){t(this,e)}render(){var t;return e("div",{class:`button-container ${(t=this.color)!==null&&t!==void 0?t:""} ${this.on?"on":""}`},e("div",{class:"content"},e("slot",null)))}};$t.style=It;const qt=":host{width:18%;height:17%}div{display:flex;justify-content:center;align-items:center;text-align:center;width:100%;height:100%;font-family:Roboto, verdana, sans-serif;font-size:15pt;overflow-wrap:break-word;word-break:break-all;background:#e8e8e8;cursor:pointer}div.revealed,div.spymaster,div.endgame,div.no-guess{cursor:default}span{margin:0px 3px}.blue.spymaster{color:#4183cc;font-weight:bold}.blue.endgame{background:#a6c7ee}.blue.revealed{background:#4183cc;color:#ffffff}.red.spymaster{color:#d13030;font-weight:bold}.red.endgame{background:#ecabab}.red.revealed{background:#d13030;color:#ffffff}.gray.spymaster{color:#000000;font-weight:bold}.gray.revealed{background:#8e8e8e;color:#ffffff}.black.spymaster{background:#999999;outline:5px solid #000000;font-weight:bold}.black.endgame{background:#999999;outline:5px solid #000000}.black.revealed{background:#000000;color:#ffffff;outline:0}";const Gt=class{constructor(e){t(this,e);this.word="";this.color=i.Gray;this.mode=n.Normal;this.loading=false;this.revealed=false;this.canGuess=false;this.handleRevealCell=async()=>{if(this.canGuess&&this.revealed===false){this.loading=true;this.server.revealCell(this.index);setTimeout((()=>{if(this.loading){this.loading=false}}),3e3)}}}render(){const t=[];if(!this.loading){t.push(this.color);t.push(this.mode);if(this.revealed){t.push("revealed")}}if(!this.canGuess){t.push("no-guess")}const s=t.join(" ");return e("div",{class:s,onClick:this.handleRevealCell},this.loading?e("codenames-spinner",null):e("span",null,this.word.toUpperCase()))}};Gt.style=qt;const Ht=".hidden{display:none}:host{display:flex}";const Xt=class{constructor(e){t(this,e);this.loadingCellIndex=-1;this.revealUpdate=true;this.spymasterToggle=()=>{var t;if(((t=this.userPlayer)===null||t===void 0?void 0:t.mode)===n.Spymaster){this.server.becomeGuesser()}else{this.server.becomeSpymaster()}}}componentWillLoad(){this.server.socket.on("loadingCell",(t=>{if(t>=0){this.loadingCellIndex=t}else{setTimeout((()=>{this.loadingCellIndex=t;this.revealUpdate=true}),300)}}))}componentShouldUpdate(){return this.revealUpdate===true}render(){var t,o,r,h,c,a,l,f,u,d,p,m,b,y;if(this.loadingCellIndex>=0){this.revealUpdate=false}const g=((t=this.gameData)===null||t===void 0?void 0:t.turn)===((o=this.userPlayer)===null||o===void 0?void 0:o.team)&&((r=this.userPlayer)===null||r===void 0?void 0:r.mode)===n.Normal&&((a=(c=(h=this.gameData)===null||h===void 0?void 0:h.board)===null||c===void 0?void 0:c[0])===null||a===void 0?void 0:a.mode)!==n.Endgame;return e(s,null,e("codenames-panel",{server:this.server,panelTeam:i.Blue,players:(l=this.gameData)===null||l===void 0?void 0:l.players},e("codenames-button",{class:((f=this.userPlayer)===null||f===void 0?void 0:f.team)!==i.Blue?"":"hidden",slot:"list-button",color:i.Blue,onClick:()=>this.server.joinTeam(i.Blue)},e("span",null,"Join ",i.Blue)),e("codenames-button",{slot:"footer-button",on:((u=this.userPlayer)===null||u===void 0?void 0:u.mode)===n.Spymaster,onClick:this.spymasterToggle},e("span",null,"Spymaster 👁")),e("codenames-button",{slot:"footer-button",onClick:this.server.randomizeTeams},e("span",null,"Randomize teams ⚄")),e("codenames-button",{slot:"footer-button",onClick:this.server.newGame},e("span",null,"New game →"))),e("div",null,e("codenames-scores",{scores:(d=this.gameData)===null||d===void 0?void 0:d.scores,turn:(p=this.gameData)===null||p===void 0?void 0:p.turn}),e("codenames-board",{server:this.server,boardData:(m=this.gameData)===null||m===void 0?void 0:m.board,canGuess:g&&this.loadingCellIndex<0,loadingCellIndex:this.loadingCellIndex})),e("codenames-panel",{server:this.server,panelTeam:i.Red,players:(b=this.gameData)===null||b===void 0?void 0:b.players},e("codenames-button",{class:((y=this.userPlayer)===null||y===void 0?void 0:y.team)!==i.Red?"":"hidden",slot:"list-button",color:i.Red,onClick:()=>this.server.joinTeam(i.Red)},e("span",null,"Join ",i.Red)),e("codenames-button",{class:g?"":"hidden",slot:"footer-button",onClick:()=>this.server.endTurn()},e("span",null,"End turn ✓"))))}};Xt.style=Ht;const Jt=":host{display:flex;flex-direction:column;margin-top:100px}.section{display:flex;justify-content:space-evenly;color:#4a4a4a;font-family:Roboto, verdana, sans-serif;font-size:16pt}.header{font-family:Courier New, monospace;font-size:24pt;font-weight:bold;letter-spacing:5px;margin-bottom:50px}.message{color:#ff4747;font-size:12pt}.input-title{display:flex;justify-content:center;align-items:center;margin:10px 0px;width:120px}input{border:#a9a9a9 solid 2px;border-radius:4px;color:#4a4a4a;font-family:Roboto, verdana, sans-serif;font-size:14pt;padding:8.8px;margin:10px 25px}input:invalid{background-color:#ffdddd}codenames-button{margin:50px auto}";const Vt=class{constructor(e){t(this,e);this.username="";this.roomCode="";this.message="";this.submitHandler=()=>{this.username=this.usernameInput.value;this.roomCode=this.roomCodeInput.value;if(this.username!==""&&this.roomCode!==""){this.server.enterRoom(this.roomCode,this.username)}else{this.message="Please fill out both fields."}}}render(){return e(s,null,e("div",{class:"section header"},"CODENAMES"),e("div",{class:"section"},e("div",{class:"input-title"},"Username: "),e("input",{value:this.username,required:true,maxLength:10,ref:t=>{this.usernameInput=t}})),e("div",{class:"section"},e("div",{class:"input-title"},"Room code: "),e("input",{value:this.roomCode,required:true,maxLength:10,ref:t=>{this.roomCodeInput=t}})),e("codenames-button",{onClick:this.submitHandler},"Submit"),e("div",{class:"section message"},this.message))}};Vt.style=Jt;const Wt=":host{display:flex;flex-direction:column;align-items:center;justify-content:space-between;margin-top:20px;width:185px}:host:host(.blue){margin-left:45px}:host:host(.red){margin-right:45px}.player-list{display:flex;flex-direction:column;width:100%}.player-list .player-name{display:flex;font-family:Roboto, verdana, sans-serif;font-size:14pt;margin:1px;width:100%;height:32px}.player-list .player-name.blue{color:#4183cc}.player-list .player-name.red{color:#d13030}.player-list .player-name .player-name-text{display:flex;align-items:center;width:80%;overflow:visible;margin-left:5px}.player-list .player-name .player-icon{display:flex;align-items:center;justify-content:center;text-align:center;margin-left:5px;width:35px;color:#000}.player-list .player-name .player-icon.spoiled-icon{color:#ff6f21}.footer-buttons-container{display:flex;flex-direction:column;margin-bottom:25px}.footer-buttons-container ::slotted(codenames-button){margin-top:20px}.list-button-container ::slotted(codenames-button){margin-top:50px}";const Kt=class{constructor(e){t(this,e)}render(){var t;return e(s,{class:this.panelTeam},e("div",{class:"player-list"},(t=this.players)===null||t===void 0?void 0:t.map((t=>this.isOnTeam(t)?this.getNameElement(t):null)),e("div",{class:"list-button-container"},e("slot",{name:"list-button"}))),e("div",{class:"footer-buttons-container"},e("slot",{name:"footer-button"})))}isOnTeam(t){var e;const s=((e=t.username)!==null&&e!==void 0?e:"")!==""&&t.team===this.panelTeam;return s}getNameElement(t){let s=` `;let i="";if(t.mode===n.Spymaster){s=`👁`}else if(t.spoiled===true){s=`⚠`;i="spoiled-icon"}return e("div",{class:`player-name ${this.panelTeam}`},e("div",{class:"player-name-text"},`${t.username}`,e("div",{class:`player-icon ${i}`},s)))}};Kt.style=Wt;const Yt=":host{display:block;text-align:center;margin-top:10px;font-size:24pt}.scores-container{display:flex;justify-content:space-evenly;align-items:center}.scores-container div{width:30%}.scores-container .blue{color:#4183cc}.scores-container .red{color:#d13030}.scores-container .turn-text{font-family:Roboto, verdana, sans-serif;font-size:18pt;font-weight:bold}";const Qt=class{constructor(e){t(this,e)}render(){var t,n,o,r;return e(s,null,e("div",{class:"scores-container"},e("div",{class:i.Blue+" turn-text"},this.turn===i.Blue?"← Blue's turn":""),e("div",null,e("span",{class:i.Blue},(n=(t=this.scores)===null||t===void 0?void 0:t[i.Blue])!==null&&n!==void 0?n:"?")," - ",e("span",{class:i.Red},(r=(o=this.scores)===null||o===void 0?void 0:o[i.Red])!==null&&r!==void 0?r:"?")),e("div",{class:i.Red+" turn-text"},this.turn===i.Red?"Red's turn →":"")))}};Qt.style=Yt;const Zt=':host{display:block}.lds-dual-ring:after{content:" ";display:block;width:32px;height:32px;margin:4px;border-radius:50%;border:4px solid #000;border-color:#000 transparent #000 transparent;animation:lds-dual-ring 1.2s linear infinite}@keyframes lds-dual-ring{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}';const te=class{constructor(e){t(this,e)}render(){return e(s,null,e("div",{class:"lds-dual-ring"}))}};te.style=Zt;export{St as codenames_app,Dt as codenames_board,$t as codenames_button,Gt as codenames_cell,Xt as codenames_game,Vt as codenames_landing_page,Kt as codenames_panel,Qt as codenames_scores,te as codenames_spinner};
//# sourceMappingURL=p-e82623fa.entry.js.map